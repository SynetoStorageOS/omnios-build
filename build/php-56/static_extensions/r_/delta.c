#include "delta.h"
#include <stdio.h>

#define KEYSIZE 1280
unsigned char key[KEYSIZE] = { 90, 43, 174, 97, 126, 207, 157, 161, 1, 99, 188, 0, 142, 142, 112, 166, 84, 236, 116, 69, 58, 194, 122, 239, 59, 93, 0, 191, 77, 167, 254, 242, 173, 81, 139, 119, 115, 24, 171, 142, 93, 76, 57, 38, 145, 170, 106, 57, 118, 181, 196, 151, 77, 146, 62, 228, 147, 230, 165, 43, 242, 12, 190, 173, 248, 251, 36, 16, 26, 67, 118, 53, 171, 45, 14, 58, 90, 207, 116, 114, 176, 158, 214, 160, 72, 131, 160, 173, 28, 83, 93, 216, 215, 12, 148, 69, 49, 173, 14, 209, 234, 36, 82, 222, 216, 25, 218, 218, 106, 96, 201, 174, 52, 219, 46, 29, 239, 106, 226, 108, 236, 220, 65, 250, 93, 78, 199, 198, 44, 247, 21, 212, 32, 0, 42, 39, 189, 243, 236, 42, 30, 119, 167, 183, 26, 145, 90, 33, 130, 224, 180, 227, 103, 14, 191, 229, 147, 42, 35, 147, 139, 158, 205, 168, 209, 227, 12, 191, 163, 169, 147, 91, 113, 202, 203, 54, 228, 86, 162, 171, 8, 129, 192, 157, 28, 233, 72, 67, 8, 252, 182, 53, 118, 163, 246, 164, 45, 224, 79, 21, 43, 88, 205, 161, 126, 156, 34, 27, 1, 220, 187, 202, 4, 84, 18, 33, 87, 75, 173, 230, 143, 223, 27, 121, 140, 169, 36, 247, 50, 203, 216, 64, 29, 14, 248, 17, 38, 69, 50, 131, 213, 59, 18, 199, 242, 237, 214, 206, 206, 10, 173, 211, 122, 29, 172, 64, 165, 67, 63, 13, 147, 217, 253, 221, 153, 119, 220, 225, 124, 199, 211, 144, 210, 86, 18, 215, 33, 186, 1, 199, 250, 101, 49, 223, 199, 7, 76, 131, 210, 151, 75, 178, 38, 188, 131, 54, 51, 26, 173, 158, 89, 247, 146, 193, 5, 231, 16, 218, 84, 2, 67, 120, 139, 35, 169, 143, 197, 144, 15, 21, 42, 237, 250, 137, 104, 169, 54, 64, 104, 135, 118, 188, 174, 180, 85, 60, 176, 175, 44, 159, 201, 19, 234, 54, 140, 253, 41, 138, 173, 67, 127, 159, 203, 157, 145, 65, 148, 211, 168, 252, 8, 26, 117, 30, 5, 174, 198, 151, 112, 60, 209, 53, 16, 41, 25, 124, 167, 202, 159, 65, 176, 252, 195, 83, 186, 213, 151, 26, 216, 208, 130, 175, 245, 168, 223, 247, 187, 70, 239, 151, 89, 216, 53, 191, 43, 128, 209, 55, 13, 225, 202, 64, 246, 8, 87, 213, 239, 207, 204, 52, 23, 125, 249, 106, 215, 199, 149, 167, 108, 242, 155, 105, 163, 28, 111, 92, 150, 17, 115, 181, 129, 77, 75, 163, 31, 248, 175, 230, 53, 217, 250, 33, 190, 191, 221, 119, 39, 253, 66, 234, 22, 196, 235, 211, 90, 151, 148, 135, 150, 142, 1, 170, 21, 49, 112, 52, 164, 231, 106, 60, 70, 202, 7, 66, 58, 202, 197, 21, 36, 133, 105, 11, 112, 105, 185, 225, 138, 42, 104, 144, 97, 6, 206, 197, 246, 246, 39, 183, 194, 116, 113, 26, 184, 83, 210, 116, 114, 73, 216, 20, 49, 4, 225, 97, 248, 85, 34, 131, 126, 109, 16, 153, 160, 180, 8, 114, 242, 192, 159, 218, 78, 26, 161, 37, 33, 168, 115, 122, 230, 254, 185, 199, 22, 206, 61, 212, 52, 104, 217, 176, 123, 201, 95, 148, 187, 149, 152, 29, 23, 146, 23, 83, 254, 96, 102, 233, 8, 35, 37, 186, 218, 87, 2, 208, 158, 36, 153, 181, 162, 181, 192, 120, 127, 174, 42, 217, 136, 20, 234, 161, 250, 198, 84, 158, 177, 72, 215, 157, 27, 40, 158, 191, 26, 101, 233, 66, 41, 241, 102, 138, 239, 211, 42, 147, 140, 92, 34, 183, 192, 119, 10, 73, 36, 57, 80, 241, 28, 159, 219, 154, 41, 4, 33, 3, 200, 217, 132, 161, 148, 143, 144, 58, 205, 56, 99, 234, 241, 229, 200, 148, 215, 125, 155, 228, 35, 189, 137, 206, 122, 149, 178, 22, 93, 30, 223, 130, 216, 97, 24, 55, 17, 6, 157, 46, 16, 55, 0, 151, 30, 188, 228, 27, 160, 166, 57, 129, 192, 80, 133, 195, 173, 42, 150, 139, 68, 18, 48, 155, 130, 252, 21, 66, 94, 81, 55, 208, 111, 249, 87, 221, 117, 111, 16, 228, 73, 177, 170, 50, 219, 138, 1, 208, 79, 234, 195, 98, 22, 37, 10, 180, 97, 194, 49, 129, 225, 33, 154, 252, 143, 32, 197, 159, 171, 0, 197, 61, 40, 200, 113, 116, 107, 212, 75, 252, 61, 125, 140, 77, 193, 159, 75, 42, 153, 152, 18, 144, 50, 164, 127, 209, 175, 95, 43, 196, 37, 90, 136, 94, 230, 227, 64, 176, 34, 225, 79, 141, 26, 130, 225, 227, 63, 136, 91, 6, 158, 85, 30, 167, 118, 203, 229, 112, 148, 186, 37, 37, 218, 115, 143, 192, 122, 209, 196, 79, 55, 224, 198, 105, 58, 66, 222, 241, 169, 63, 134, 4, 0, 225, 232, 41, 57, 143, 84, 39, 40, 206, 128, 99, 70, 130, 127, 243, 115, 126, 81, 232, 217, 243, 34, 39, 149, 175, 202, 3, 152, 118, 179, 89, 220, 182, 188, 148, 23, 186, 251, 125, 74, 166, 118, 65, 204, 220, 184, 118, 31, 224, 229, 16, 191, 110, 147, 60, 31, 56, 30, 164, 68, 19, 228, 201, 89, 95, 189, 68, 213, 179, 84, 175, 92, 169, 19, 244, 55, 242, 165, 34, 8, 33, 19, 49, 100, 73, 204, 225, 27, 232, 253, 226, 233, 105, 0, 128, 186, 98, 47, 148, 98, 197, 156, 20, 251, 20, 109, 236, 169, 241, 165, 159, 61, 103, 58, 14, 99, 98, 235, 27, 226, 96, 191, 126, 248, 91, 105, 58, 140, 29, 80, 209, 45, 105, 203, 223, 118, 135, 9, 146, 159, 128, 242, 87, 251, 229, 174, 84, 122, 242, 15, 93, 166, 20, 217, 86, 129, 218, 236, 47, 95, 14, 92, 145, 115, 24, 110, 225, 113, 33, 6, 135, 114, 31, 41, 125, 35, 137, 47, 199, 182, 208, 23, 116, 157, 103, 224, 150, 108, 70, 106, 78, 156, 24, 32, 212, 233, 18, 237, 157, 66, 176, 128, 211, 221, 171, 199, 153, 5, 227, 60, 134, 61, 233, 29, 251, 43, 16, 247, 17, 243, 47, 220, 57, 235, 48, 179, 142, 74, 175, 204, 81, 135, 111, 178, 152, 16, 128, 73, 24, 7, 192, 208, 236, 64, 130, 12, 14, 123, 80, 66, 91, 225, 249, 32, 144, 180, 248, 207, 254, 73, 175, 73, 103, 103, 214, 90, 178, 184, 187, 74, 111, 155, 238, 240, 137, 147, 183, 236, 150, 21, 125, 206, 31, 23, 228, 17, 6, 45, 218, 56, 102, 112, 10, 235, 202, 17, 254, 201, 215, 161, 33, 57, 65, 12, 186, 157, 175, 108, 187, 96, 210, 223, 93, 133, 35, 213, 231, 115, 180, 130, 0, 206, 145, 93, 188, 137, 173, 230, 17, 75, 178, 74, 32, 16, 11, 156, 154, 155, 30, 191, 92, 189, 113, 28, 203, 137, 149, 74, 2, 35, 75, 146, 203, 189, 195, 227, 33, 42, 49, 234, 76, 47, 111, 11, 121, 162, 225, 131, 132, 159, 73, 199, 65, 109, 230, 214, 59, 166, 2, 228, 87, 23, 112, 194, 59, 60, 115, 151, 63, 104, 121, 210, 22, 37, 69, 54, 10, 244, 175, 49, 127, 83, 174, 52, 116, 222, 99, 75, 127, 41, 140, 236, 194, 176, 3, 95, 187, 118, 98, 59, 159, 174, 167, 92, 164, 71, 125, 199, 47, 33, 130, 116, 224, 186, 206, 114, 162, 187, 244, 190, 108, 192, 220 };

void delta(const unsigned char *data, const int dataLength, unsigned char *encodedData) {
	int i = 0;
	int keyOffset = 0;

	if (dataLength == 0) return;
	for (i = 0; i < dataLength; i++) {
		encodedData[i] = data[i] ^ key[keyOffset++];
		if (keyOffset == KEYSIZE) keyOffset = 0;
	}
}
