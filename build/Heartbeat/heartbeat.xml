<?xml version="1.0"?>
<!DOCTYPE service_bundle SYSTEM "/usr/share/lib/xml/dtd/service_bundle.dtd.1">

<service_bundle type='manifest' name='syneto-unified-storage:default'>

<service name='system/heartbeat' type='service' version='1'>

	<instance name='default' enabled='false'>
		<dependency name='network' grouping='require_all' restart_on='error' type='service'>
				<service_fmri value='svc:/milestone/network:default'/>
		</dependency>
		
		<dependency name='filesystem-local' grouping='require_all' restart_on='none' type='service'>
			<service_fmri value='svc:/system/filesystem/local:default'/>
		</dependency>
	
		<exec_method type='method' name='start'   exec='/lib/svc/method/svc-heartbeat start' timeout_seconds='60' />
		<exec_method type='method' name='stop'    exec='/lib/svc/method/svc-heartbeat stop'  timeout_seconds='360' />
        <exec_method type='method' name='restart' exec='/lib/svc/method/svc-heartbeat restart' timeout_seconds='420' />
		<exec_method type='method' name='refresh' exec='/lib/svc/method/svc-heartbeat refresh' timeout_seconds='60' />

        <property_group name="startd" type="framework">
            <propval name="duration" type="astring" value="contract"/>
            <propval name="ignore_error" type="astring" value="core,signal"/>
        </property_group>

		<template>
			<common_name>
				<loctext xml:lang='C'>
					Syneto Storage HA heartbeat daemon
				</loctext>
			</common_name>
		</template>
	</instance>
	
	<stability value='Evolving' />
</service>

</service_bundle>
