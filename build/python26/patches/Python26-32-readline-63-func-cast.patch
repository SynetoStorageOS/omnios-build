diff -Nru Python-2.6.8-orig/Modules/readline.c Python-2.6.8/Modules/readline.c
--- Python-2.6.8-orig/Modules/readline.c	2012-04-10 18:32:10.000000000 +0300
+++ Python-2.6.8/Modules/readline.c	2015-01-09 20:14:39.470136819 +0200
@@ -699,14 +699,22 @@
 }
 
 static int
+#if defined(_RL_FUNCTION_TYPEDEF)
 on_startup_hook(void)
+#else
+on_startup_hook()
+#endif
 {
     return on_hook(startup_hook);
 }
 
 #ifdef HAVE_RL_PRE_INPUT_HOOK
 static int
+#if defined(_RL_FUNCTION_TYPEDEF)
 on_pre_input_hook(void)
+#else
+on_pre_input_hook()
+#endif
 {
     return on_hook(pre_input_hook);
 }
@@ -841,12 +849,25 @@
     rl_bind_key_in_map ('\t', rl_complete, emacs_meta_keymap);
     rl_bind_key_in_map ('\033', rl_complete, emacs_meta_keymap);
     /* Set our hook functions */
+#if defined(_RL_FUNCTION_TYPEDEF)
+    rl_startup_hook = (rl_hook_func_t *)on_startup_hook;
+#else
     rl_startup_hook = (Function *)on_startup_hook;
+#endif
+
 #ifdef HAVE_RL_PRE_INPUT_HOOK
+#  if defined(_RL_FUNCTION_TYPEDEF)
+    rl_pre_input_hook = (rl_hook_func_t *)on_pre_input_hook;
+#  else
     rl_pre_input_hook = (Function *)on_pre_input_hook;
+#  endif
 #endif
     /* Set our completion function */
+#if defined(_RL_FUNCTION_TYPEDEF)
+    rl_attempted_completion_function = (rl_completion_func_t *)flex_complete;
+#else
     rl_attempted_completion_function = (CPPFunction *)flex_complete;
+#endif
     /* Set Python word break characters */
     rl_completer_word_break_characters =
         strdup(" \t\n`~!@#$%^&*()-=+[{]}\\|;:'\",<>/?");
